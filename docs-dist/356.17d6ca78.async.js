"use strict";(self.webpackChunkreact_gonglu_design=self.webpackChunkreact_gonglu_design||[]).push([[356],{85400:function(Pn,ye,C){C.r(ye),C.d(ye,{Button:function(){return Se},Calendar:function(){return We},CountdownButton:function(){return Ke},Foo:function(){return qe},LargeFileUpload:function(){return yn},MiniCalendar:function(){return Cn},RankList:function(){return Mn},ScrollBoard:function(){return Tn},VideoTimeLine:function(){return Bn}});var j=C(67294),t=C(85893),Ne=function(e){var n=e.type,o=n===void 0?"default":n,u=e.children,i=e.onClick;return(0,t.jsx)("button",{type:"button",className:"dumi-btn ".concat(o?"dumi-btn-"+o:""),onClick:i,children:u})},Se=(0,j.memo)(Ne),De=C(97857),k=C.n(De),be=C(5574),X=C.n(be),je=C(27484),ee=C.n(je),He={formatYear:"YYYY",formatMonth:"MMM YYYY",today:"Today",month:{January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December"},week:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},Le=He,ke={formatYear:"YYYY \u0433\u043E\u0434",formatMonth:"YYYY \u0433\u043E\u0434 MM \u043C\u0435\u0441\u044F\u0446",today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",month:{January:"\u042F\u043D\u0432\u0430\u0440\u044C",February:"\u0424\u0435\u0432\u0440\u0430\u043B\u044C",March:"\u041C\u0430\u0440\u0442",April:"\u0410\u043F\u0440\u0435\u043B\u044C",May:"\u041C\u0430\u0439",June:"\u0418\u044E\u043D\u044C",July:"\u0418\u044E\u043B\u044C",August:"\u0410\u0432\u0433\u0443\u0441\u0442",September:"\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C",October:"\u041E\u043A\u0442\u044F\u0431\u0440\u044C",November:"\u041D\u043E\u044F\u0431\u0440\u044C",December:"\u0414\u0435\u043A\u0430\u0431\u0440\u044C"},week:{monday:"\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A",tuesday:"\u0412\u0442\u043E\u0440\u043D\u0438\u043A",wednesday:"\u0421\u0440\u0435\u0434\u0430",thursday:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433",friday:"\u041F\u044F\u0442\u043D\u0438\u0446\u0430",saturday:"\u0421\u0443\u0431\u0431\u043E\u0442\u0430",sunday:"\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435"}},Ae=ke,Ie={formatYear:"YYYY \u5E74",formatMonth:"YYYY \u5E74 MM \u6708",today:"\u4ECA\u5929",month:{January:"\u4E00\u6708",February:"\u4E8C\u6708",March:"\u4E09\u6708",April:"\u56DB\u6708",May:"\u4E94\u6708",June:"\u516D\u6708",July:"\u4E03\u6708",August:"\u516B\u6708",September:"\u4E5D\u6708",October:"\u5341\u6708",November:"\u5341\u4E00\u6708",December:"\u5341\u4E8C\u6708"},week:{monday:"\u5468\u4E00",tuesday:"\u5468\u4E8C",wednesday:"\u5468\u4E09",thursday:"\u5468\u56DB",friday:"\u5468\u4E94",saturday:"\u5468\u516D",sunday:"\u5468\u65E5"}},Ye=Ie,Ee={"zh-CN":Ye,"en-US":Le,"ru-RU":Ae},pe=Ee,Re=(0,j.createContext)({locale:"en-US"}),fe=Re;function Te(a){var e=(0,j.useContext)(fe),n=pe[e.locale];return(0,t.jsx)("div",{className:"gong-lu-calendar-header",children:(0,t.jsxs)("div",{className:"gong-lu-calendar-header-left",children:[(0,t.jsx)("div",{className:"gong-lu-calendar-header-icon",onClick:a.prevMonthHandler,children:"<"}),(0,t.jsx)("div",{className:"gong-lu-calendar-header-value",children:a.curMonth.format(n.formatMonth)}),(0,t.jsx)("div",{className:"gong-lu-calendar-header-icon",onClick:a.nextMonthHandler,children:">"}),(0,t.jsx)("div",{className:"gong-lu-calendar-header-btn",onClick:a.todayHandler,children:n.today})]})})}var $e=Te,Fe=C(93967),xe=C.n(Fe);function Ue(a){for(var e=a.startOf("month"),n=e.day(),o=new Array(6*7),u=0;u<n;u++)o[u]={date:e.subtract(n-u,"day"),currentMonth:!1};for(var i=n;i<o.length;i++){var r=e.add(i-n,"day");o[i]={date:r,currentMonth:r.month()===a.month()}}return o}function Be(a,e,n,o,u){for(var i=[],r=0;r<6;r++){for(var c=[],l=function(){var D=a[r*7+g];c[g]=(0,t.jsx)("div",{className:"gong-lu-calendar-month-body-cell "+(D.currentMonth?"gong-lu-calendar-month-body-cell-current":""),onClick:function(){return u==null?void 0:u(D.date)},children:e?e(D.date):(0,t.jsxs)("div",{className:"gong-lu-calendar-month-body-cell-date",children:[(0,t.jsx)("div",{className:xe()("gong-lu-calendar-month-cell-body-date-value",o.format("YYYY-MM-DD")===D.date.format("YYYY-MM-DD")?"gong-lu-calendar-month-body-cell-date-selected":""),children:D.date.date()}),(0,t.jsx)("div",{className:"gong-lu-calendar-cell-body-date-content",children:n==null?void 0:n(D.date)})]})})},g=0;g<7;g++)l();i.push(c)}return i.map(function(f,D){return(0,t.jsx)("div",{className:"gong-lu-calendar-month-body-row",children:f},D)})}function Pe(a){var e=(0,j.useContext)(fe),n=a.dateInnerContent,o=a.dateRender,u=a.value,i=a.selectHandler,r=a.curMonth,c=pe[e.locale],l=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],g=Ue(r);return(0,t.jsxs)("div",{className:"gong-lu-calendar-month",children:[(0,t.jsx)("div",{className:"gong-lu-calendar-month-week-list",children:l.map(function(f){return(0,t.jsx)("div",{className:"gong-lu-calendar-month-week-list-item",children:c.week[f]},f)})}),(0,t.jsx)("div",{className:"gong-lu-calendar-month-body",children:Be(g,o,n,u,i)})]})}var Ze=Pe,Oe=function(e){var n=(0,j.useState)(e.value),o=X()(n,2),u=o[0],i=o[1],r=(0,j.useState)(e.value),c=X()(r,2),l=c[0],g=c[1],f=function(Y){var S;i(Y),g(Y),(S=e.onChange)===null||S===void 0||S.call(e,Y)},D=function(Y){f(Y)},N=function(){g(l.subtract(1,"month"))},A=function(){g(l.add(1,"month"))},H=function(){var Y=ee()(Date.now());f(Y)};return(0,t.jsx)(fe.Provider,{value:{locale:e.locale||navigator.language},children:(0,t.jsxs)("div",{className:"gong-lu-calendar",children:[(0,t.jsx)($e,{curMonth:l,todayHandler:H,prevMonthHandler:N,nextMonthHandler:A}),(0,t.jsx)(Ze,k()(k()({},e),{},{curMonth:l,value:u,selectHandler:D}))]})})},We=Oe,ze=C(13769),Ge=C.n(ze),ce=C(30605),Je=["maxSecondNum","txt","loadingTxt","disabledTxt","onClick"],Ve=60;function Xe(a){var e=a.maxSecondNum,n=e===void 0?Ve:e,o=a.txt,u=o===void 0?"\u83B7\u53D6\u9A8C\u8BC1\u7801":o,i=a.loadingTxt,r=i===void 0?"\u53D1\u9001\u4E2D":i,c=a.disabledTxt,l=c===void 0?function(M){return"".concat(M," \u79D2\u540E\u91CD\u8BD5")}:c,g=a.onClick,f=g===void 0?function(M){M()}:g,D=Ge()(a,Je),N=(0,j.useState)({timing:!1,count:n}),A=X()(N,2),H=A[0],b=A[1];(0,j.useEffect)(function(){var M=void 0;return H.timing&&(M=window.setInterval(function(){b(function(R){var m=R.count,x=R.timing;return m===1?(window.clearInterval(M),{timing:!1,count:n}):{timing:x,count:m-1}})},1e3)),function(){return window.clearInterval(M)}},[H.timing]);var Y=function(){b(k()(k()({},H),{},{timing:!0}))},S;return D.loading?S=r:H.timing?S=l(H.count):S=u,(0,t.jsx)(ce.ZP,k()(k()({disabled:H.timing,style:k()({minWidth:100},D.style||{}),onClick:function(){f&&f(Y)}},D),{},{children:S}))}var Ke=Xe,Qe=function(){return(0,t.jsx)("div",{className:"Foo",children:(0,t.jsx)("a",{className:"App-link",href:"https://baidu.com",target:"_blank",rel:"noopener noreferrer",children:"Learn react"})})},qe=Qe,_e=C(9783),Ce=C.n(_e),en=C(15009),Z=C.n(en),nn=C(99289),se=C.n(nn),rn=C(88484),de=C(96271),we=C(78701),an=C(73663),tn=C(9669),he=C.n(tn),K=C(94910),on=C(80406),ln=C.n(on),un=C(8322),sn=C.n(un),dn={upload:"GcB94DnmDgy0AbDR0qCR"},cn=function(e){return new Promise(function(n,o){var u=new FileReader;u.readAsArrayBuffer(e),u.onload=function(i){var r,c=(r=i.target)===null||r===void 0?void 0:r.result,l=new(sn()).ArrayBuffer,g="",f="";l.append(c),g=l.end(),f=/\.([a-zA-Z0-9]+)$/.exec(e.name)[1],console.log(g,f,l);var D=e.name,N=e.size;n({buffer:c,fileName:D,HASH:g,fileLength:N})},u.onerror=function(){o("\u6587\u4EF6\u8BFB\u53D6\u5931\u8D25"),de.ZP.error("\u6587\u4EF6\u8BFB\u53D6\u9519\u8BEF")}})},vn=function(){var a=se()(Z()().mark(function e(n,o,u,i){var r,c,l,g,f=arguments;return Z()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return r=f.length>4&&f[4]!==void 0?f[4]:5242880,c=f.length>5?f[5]:void 0,N.prev=2,N.next=5,he().post("".concat(u,"/fileupload/upload/init"),{appCode:"gongluUpload",uploadCode:"gongluFastDFS",fileName:o,fileLength:n,uploadId:c["".concat(o).concat(n)]||"",expectChunkCount:Math.ceil(n/r)},{headers:{token:localStorage.getItem("token")}});case 5:return g=N.sent,l=g.data.data,N.abrupt("return",{reqUrlList:K.Z.map(K.Z.get(l,"chunkInfoList"),function(A,H){return{chunkIndex:H,uploadUrl:A.uploadUrl,isCompleted:A.isCompleted}}),uploadId:K.Z.get(l,"internalUploadId")});case 10:N.prev=10,N.t0=N.catch(2),console.error(N.t0,"\u83B7\u53D6\u57FA\u672C\u5316\u914D\u7F6E\u5931\u8D25");case 13:return N.abrupt("return",!1);case 14:case"end":return N.stop()}},e,null,[[2,10]])}));return function(n,o,u,i){return a.apply(this,arguments)}}(),fn=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5242880;console.log(e,e.name,164);for(var o=[],u=0;u<e.size;)o=K.Z.concat(o,e.slice(u,u+n)),u+=n;console.log(o,171);var i=o.map(function(r){return new Blob([r],{type:""})});return console.log(i,174),i},hn=function(){var a=se()(Z()().mark(function e(n){var o,u,i,r,c,l;return Z()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(o=n.chunksCount,u=n.reqUrlList,i=n.requireAction,r=n.uploadId,c=n.fileName,l=n.fileLength,!(o<u.length)){f.next=3;break}return f.abrupt("return",!1);case 3:return f.prev=3,f.next=6,he().post("".concat(i,"/fileupload/upload/complete"),{uploadId:r},{headers:{token:localStorage.getItem("token")}});case 6:f.next=11;break;case 8:f.prev=8,f.t0=f.catch(3),console.error(f.t0,"\u64CD\u4F5C\u5931\u8D25");case 11:return f.abrupt("return",{fileName:c,fileLength:l});case 12:case"end":return f.stop()}},e,null,[[3,8]])}));return function(n){return a.apply(this,arguments)}}(),mn=function(){var a=se()(Z()().mark(function e(n,o,u){var i,r,c,l,g,f,D,N,A,H,b,Y,S,M,R;return Z()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(i=n.fileChunksList,r=n.reqUrlList,c=n.requireAction,l=n.uploadId,g=n.limitRequire,f=n.fileName,D=n.fileLength,N=n.uploadIdAndErrorId,!(i.length<1)){x.next=3;break}return x.abrupt("return",!1);case 3:console.log(i,192),A=function(){var E=[];K.Z.forEach(r,function($){$.isCompleted||(E=K.Z.concat(E,i[$.chunkIndex]))});var L=K.Z.filter(r,function($){return!$.isCompleted});return{urls:L,chunks:E}},N[f+D]&&(H=N[f+D]&&A(),b=H.urls,Y=H.chunks,r=b,i=Y),S=0,M=ln()(g),r=K.Z.map(r,function(T){return T.uploadUrl}),R=[],K.Z.forEach(i,function(){var T=se()(Z()().mark(function E(L,$){var O,V;return Z()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:O=new FormData,O.append("file",L),F.prev=2,console.log(r[$],210),R=K.Z.concat(R,M(function(){return he()({method:"put",url:"http://".concat(r[$]),data:O,timeout:9e4}).then(function(){}).catch(function(ne){throw u(l,L),"".concat(ne," \u5355\u4E2A\u5207\u7247\u4E0A\u4F20\u4E2D\u65AD\u6216\u5931\u8D25")})})),F.next=10;break;case 7:throw F.prev=7,F.t0=F.catch(2),"".concat(F.t0," \u5355\u4E2A\u5207\u7247\u4E0A\u4F20\u5931\u8D25");case 10:return F.next=12,Promise.all(R);case 12:return S++,o(S,r),V={chunksCount:S,reqUrlList:r,requireAction:c,uploadId:l,fileName:f,fileLength:D},F.abrupt("return",hn(V));case 16:case"end":return F.stop()}},E,null,[[2,7]])}));return function(E,L){return T.apply(this,arguments)}}());case 11:case"end":return x.stop()}},e)}));return function(n,o,u){return a.apply(this,arguments)}}(),gn=function(e){var n=e.name,o=n===void 0?"file":n,u=e.title,i=u===void 0?"\u4E0A\u4F20":u,r=e.requireAction,c=r===void 0?"http://192.168.1.86:2231":r,l=e.listType,g=l===void 0?"picture":l,f=e.minSliceSize,D=f===void 0?5:f,N=e.limitRequire,A=N===void 0?6:N,H=e.fieldProps,b=e.formItemFieldProps,Y=e.className,S=e.children,M=(0,j.useState)("done"),R=X()(M,2),m=R[0],x=R[1],T=(0,j.useState)(0),E=X()(T,2),L=E[0],$=E[1],O=(0,j.useState)(),V=X()(O,2),B=V[0],F=V[1],ne=function(){var y=se()(Z()().mark(function d(w){var s,v,h,p,I,P,U,J,Q,q,W;return Z()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return s=w.file,z.next=3,cn(s);case 3:return v=z.sent,h=v.fileName,p=v.HASH,I=v.fileLength,P=D*1024*1024,z.next=10,vn(I,h,c,p,P,B);case 10:return U=z.sent,J=U.reqUrlList,Q=U.uploadId,z.next=15,fn(s,P);case 15:return q=z.sent,console.log(q,319),z.next=19,mn({fileChunksList:q,reqUrlList:J,requireAction:c,uploadId:Q,limitRequire:A,fileName:h,fileLength:I,uploadIdAndErrorId:B},function(_,ge){$(Math.round(_/ge.length*100)),_===ge.length&&(x("done"),w.onSuccess(W))},function(_){$(0),x("error"),F(k()(k()({},B),{},Ce()({},h+I,_))),w.onError(W)});case 19:W=z.sent,B[h+I]&&F(k()(k()({},B),{},Ce()({},h+I,null)));case 21:case"end":return z.stop()}},d)}));return function(w){return y.apply(this,arguments)}}(),oe=function(d){return x(d.file.status),!1},re=function(){if(m==="uploading")return de.ZP.warning("\u8BF7\u52FF\u8FDE\u7EED\u4E0A\u4F20\u6587\u4EF6\uFF0C\u7B49\u5F85\u4E2D..."),we.Z.LIST_IGNORE},le=function(d){if(d.status==="uploading")return de.ZP===null||de.ZP===void 0||de.ZP.warning("\u6587\u4EF6\u6B63\u5728\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u540E..."),!1};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(an.Z.Item,k()(k()({name:o},b),{},{className:Y,children:(0,t.jsxs)(we.Z,k()(k()({className:dn.upload,listType:g,progress:{strokeWidth:3,format:function(d){return"".concat(d,"%")}},onChange:oe,onRemove:le,customRequest:ne,beforeUpload:re,itemRender:function(d,w){return w.percent=L,d}},H),{},{children:[(0,t.jsx)(ce.ZP,{icon:(0,t.jsx)(rn.Z,{}),children:i}),S]}))}))})},yn=gn,G={calendar:"qLuMzLyu_scGvoTXc4o5",header:"mrj3jD9L648ug6jGa8Fg",days:"s_yGsFkbxpEG37UkM8eZ",empty:"b4kCwj8X98WgiG7JSroC",day:"zsa64L8Y_jo534VgkzWx",selected:"WVIVyeIFOO0mnrP8idvu"},pn=function(e,n){var o=e.value,u=o===void 0?new Date:o,i=e.onChange,r=(0,j.useState)(u),c=X()(r,2),l=c[0],g=c[1];(0,j.useImperativeHandle)(n,function(){return{getDate:function(){return l},setDate:function(M){g(M)}}});var f=function(){g(new Date(l.getFullYear(),l.getMonth()-1,1))},D=function(){g(new Date(l.getFullYear(),l.getMonth()+1,1))},N=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],A=function(M,R){return new Date(M,R+1,0).getDate()},H=function(M,R){return new Date(M,R,1).getDay()},b=function(M,R,m){return new Date(M,R,m).getDate()},Y=function(){for(var M=[],R=A(l.getFullYear(),l.getMonth()),m=H(l.getFullYear(),l.getMonth()),x=0;x<m;x++)M.push((0,t.jsx)("div",{className:G.empty,children:b(l.getFullYear(),l.getMonth(),x-m+1)},"empty1"+x));for(var T=1;T<=R;T++){var E=i==null?void 0:i.bind(null,new Date(l.getFullYear(),l.getMonth(),T));M.push((0,t.jsx)("div",{onClick:E,className:"".concat(G.day," ").concat(T===l.getDate()?G.selected:""),children:T},T))}for(var L=0;L<m;L++)M.push((0,t.jsx)("div",{className:G.empty,children:b(l.getFullYear(),l.getMonth(),R+L+1)},"empty2"+L));return M.slice(0,42)};return(0,t.jsxs)("div",{className:G.calendar,children:[(0,t.jsxs)("div",{className:G.header,children:[(0,t.jsx)(ce.ZP,{onClick:f,children:"<"}),(0,t.jsxs)("div",{children:[l.getFullYear()," \u5E74 ",N[l.getMonth()]]}),(0,t.jsx)(ce.ZP,{onClick:D,children:">"})]}),(0,t.jsxs)("div",{className:G.days,children:[(0,t.jsx)("div",{className:G.day,children:"\u65E5"}),(0,t.jsx)("div",{className:G.day,children:"\u4E00"}),(0,t.jsx)("div",{className:G.day,children:"\u4E8C"}),(0,t.jsx)("div",{className:G.day,children:"\u4E09"}),(0,t.jsx)("div",{className:G.day,children:"\u56DB"}),(0,t.jsx)("div",{className:G.day,children:"\u4E94"}),(0,t.jsx)("div",{className:G.day,children:"\u516D"}),Y()]})]})},xn=j.forwardRef(pn),Cn=xn;function wn(a){var e=a.data,n=e===void 0?[]:e,o=a.header,u=o===void 0?[]:o,i=a.leftIndex,r=i===void 0?!0:i,c=a.leftIndexName,l=c===void 0?"\u6392\u540D":c,g=a.headColor,f=g===void 0?"#000":g,D=a.bodyColor,N=D===void 0?"#000":D,A=a.count,H=A===void 0?8:A,b=(0,j.useState)(u),Y=X()(b,2),S=Y[0],M=Y[1],R=(0,j.useState)(),m=X()(R,2),x=m[0],T=m[1];return(0,j.useEffect)(function(){r&&M(function(L){return L.unshift(l),L});var E=[];n.forEach(function(L){if(!L)return{};for(var $=[],O=0,V=Object.keys(L);O<V.length;O++){var B=V[O];$.push(L[B])}E.push($)}),T(E)},[]),(0,t.jsxs)("div",{className:"gong-lu_rank-list",children:[(0,t.jsx)("ul",{className:"gong-lu_header",style:{color:f},children:S&&S.map(function(E,L){return(0,t.jsx)(j.Fragment,{children:(0,t.jsx)("li",{children:E})},L)})}),x&&x.length?(0,t.jsx)("ul",{className:"gong-lu_body",style:{color:N},children:x.filter(function(E,L){return L<H}).map(function(E,L){return(0,t.jsxs)("li",{className:"gong-lu_body-li".concat(L),children:[r&&(0,t.jsx)("div",{className:"gong-lu_flex gong-lu_name",children:(0,t.jsx)("div",{className:"gong-lu_index",children:L+1})}),E.map(function($,O){return(0,t.jsx)("div",{className:"gong-lu_flex gong-lu_name",children:(0,t.jsx)("span",{title:$||"-",children:$||"-"})},O)})]},L)})}):(0,t.jsx)("div",{className:"gong-lu-empty",children:"\u6682\u65E0\u6570\u636E"})]})}var Mn=wn,Nn=C(19632),ae=C.n(Nn),Sn=C(2096),me=C(48568),Dn=C(68652),bn=C(45697),ve=C.n(bn);function jn(a,e){var n=window.MutationObserver,o=new n(e);return o.observe(a,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),o}var Hn=function(e){var n=!1,o=!1,u=null;if(typeof e=="function"&&(e=e()),!e||typeof e.next!="function")return function(){return{}};return Promise.resolve().then(function(){n||i(e.next())}),{end:function(){n=!0,Promise.resolve().then(function(){e.return(),e=null})},pause:function(){n||(o=!0)},resume:function(){var c=u;!n&&o&&(o=!1,Promise.resolve(u).then(function(){!n&&!o&&c===u&&i(e.next())}))}};function i(r){return r.done?r.value:(u=r.value,Promise.resolve(r.value).then(function(){!n&&!o&&i(e.next())}))}},Ln=C(53434);function kn(a){var e=(0,j.useRef)(null),n=(0,j.useState)({width:0,height:0}),o=X()(n,2),u=o[0],i=o[1],r=(0,j.useCallback)(function(){var c=e.current||{clientWidth:0,clientHeight:0},l=c.clientWidth,g=c.clientHeight;i({width:l,height:g}),e.current?(!l||!g)&&console.warn("\u7EC4\u4EF6\u9AD8\u5EA6\u6216\u8005\u5BBD\u5EA6\u4E3A0\uFF0C\u53EF\u80FD\u4F1A\u53D1\u751F\u7EC4\u4EF6\u5F02\u5E38!"):console.warn("\u6CA1\u6709\u83B7\u53D6\u5230DOM!")},[]);return(0,j.useImperativeHandle)(a,function(){return{setWH:r}},[]),(0,j.useEffect)(function(){var c=(0,Ln.Z)(r,100);c();var l=jn(e.current,c);return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c),l&&(l.disconnect(),l.takeRecords())}},[]),k()(k()({},u),{},{domRef:e,setWH:r})}var An={columns:[{title:"",dataIndex:"",ellipsis:!1}],dataSource:[],header:[],data:[],rowNum:5,headerBGC:"#62c9e9",oddRowBGC:"#4fa3c2cc",evenRowBGC:"#5097592c",oddRowBorder:{borderWidth:"0 2px 0 2px",borderStyle:"dashed",borderColor:"#37ecc5"},evenRowBorder:{borderWidth:"0 2px 0 2px",borderStyle:"dashed",borderColor:"#37ecc5"},headerColor:"#000000",rowColor:"#fff",waitTime:2e3,headerHeight:35,columnWidth:[],align:[],index:!1,indexHeader:"#",carousel:"single",hoverPause:!0},In=function(e,n){return n.ellipsis?(0,t.jsx)(Sn.Z,{placement:"topLeft",title:e,children:e}):e};function Yn(a){var e=a.header,n=a.index,o=a.indexHeader;return e.length?(e=ae()(e),n&&e.unshift(o),e):[]}function En(a){var e=a.data,n=a.index,o=a.headerBGC,u=a.rowNum;n&&(e=e.map(function(r,c){r=ae()(r);var l=(0,t.jsx)("span",{className:"index",style:{backgroundColor:o},children:c+1});return r.unshift(l),r})),e=e.map(function(r,c){return{ceils:r,rowIndex:c}});var i=e.length;return i>u&&(e=[].concat(ae()(e),ae()(e))),e.map(function(r,c){return k()(k()({},r),{},{scroll:c})})}function Rn(a,e){var n=e.length,o=new Array(n).fill("left"),u=a.align;return(0,me.Z)(o,u)}var Me=(0,j.forwardRef)(function(a,e){var n=a.onClick,o=a.config,u=a.className,i=a.style,r=a.onMouseOver,c=kn(e),l=c.width,g=c.height,f=c.domRef,D=(0,j.useState)({mergedConfig:null,header:[],rows:[],widths:[],heights:[],aligns:[]}),N=X()(D,2),A=N[0],H=N[1],b=A.mergedConfig,Y=A.header,S=A.rows,M=A.widths,R=A.heights,m=A.aligns,x=(0,j.useRef)(k()(k()({},A),{},{rowsData:[],avgHeight:0,animationIndex:0}));Object.assign(x.current,A);function T(){if(b){var y=L(b,x.current.rowsData),d=$(b,Y),w={widths:y,heights:d};Object.assign(x.current,w),H(function(s){return k()(k()({},s),w)})}}var E=function(d){var w=[];return d.dataSource.forEach(function(s){var v=[];d.columns.forEach(function(h){var p=h.render?h.render(s[h.dataIndex],s):In(s[h.dataIndex],h);v.push(p)}),w.push(v)}),k()(k()({},d),{},{header:d.columns.map(function(s){return s.title}),data:w})},L=function(d,w){var s=d.columnWidth,v=d.header,h=s.reduce(function(U,J){return U+J},0),p=0;w[0]?p=w[0].ceils.length:v.length&&(p=v.length);var I=(l-h)/(p-s.length),P=new Array(p).fill(I);return(0,me.Z)(P,s)};function $(y,d){var w=y.headerHeight,s=y.rowNum,v=y.data,h=g;d.length&&(h-=w);var p=h/s;return Object.assign(x.current,{avgHeight:p}),new Array(v.length).fill(p)}var O=function(){var d=E((0,me.Z)((0,Dn.Z)(An),o||{})),w=Yn(d),s=En(d),v=L(d,x.current.rowsData),h=$(d,w),p=Rn(d,w),I={mergedConfig:d,header:w,rows:s,widths:v,aligns:p,heights:h};Object.assign(x.current,I,{rowsData:s,animationIndex:0}),H(function(P){return k()(k()({},P),I)})};function V(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Z()().mark(function d(){var w,s,v,h,p,I,P,U,J,Q,q,W,ue,z,_;return Z()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(s=x.current,v=s.avgHeight,h=s.animationIndex,p=s.mergedConfig,I=p.waitTime,P=p.carousel,U=p.rowNum,J=s.rowsData,Q=J.length,!y){ie.next=5;break}return ie.next=5,new Promise(function(te){return setTimeout(te,I)});case 5:return q=P==="single"?1:U,W=J.slice(h),(w=W).push.apply(w,ae()(J.slice(0,h))),W=W.slice(0,P==="page"?U*2:U+1),ue=new Array(Q).fill(v),H(function(te){return k()(k()({},te),{},{rows:W,heights:ue})}),ie.next=13,new Promise(function(te){return setTimeout(te,300)});case 13:h+=q,z=h-Q,z>=0&&(h=z),_=ae()(ue),_.splice.apply(_,[0,q].concat(ae()(new Array(q).fill(0)))),Object.assign(x.current,{animationIndex:h}),H(function(te){return k()(k()({},te),{},{heights:_})});case 20:case"end":return ie.stop()}},d)})()}function B(y,d,w,s,v){var h=s.ceils,p=s.rowIndex;y&&y({row:h,ceil:v,rowIndex:p,columnIndex:w})}function F(y,d,w,s,v){if(y&&B(r,d,w,s,v),!!b.hoverPause){var h=re.current,p=h.pause,I=h.resume;y&&p&&I?p():function(){I&&I()}()}}var ne=function(d){return b[d%2===0?"evenRowBGC":"oddRowBGC"]},oe=function(d){return b[d%2===0?"evenRowBorder":"oddRowBorder"]},re=(0,j.useRef)({});(0,j.useEffect)(function(){var y=Z()().mark(w);O();var d=!0;function w(){var I;return Z()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:I=Z()().mark(function J(){var Q;return Z()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.delegateYield(V(d),"t0",1);case 1:return d=!1,Q=x.current.mergedConfig.waitTime,W.next=5,new Promise(function(ue){return setTimeout(ue,Q-300)});case 5:case"end":return W.stop()}},J)});case 1:return U.delegateYield(I(),"t0",3);case 3:U.next=1;break;case 5:case"end":return U.stop()}},y)}var s=x.current,v=s.mergedConfig.rowNum,h=s.rows,p=h.length;if(!(v>=p))return re.current=Hn(w),re.current.end},[o,f.current]),(0,j.useEffect)(T,[l,g,f.current]);var le=(0,j.useMemo)(function(){return xe()("dv-scroll-board",u)},[u]);return(0,t.jsxs)("div",{className:le,style:i,ref:f,children:[!!Y.length&&!!b&&(0,t.jsx)("div",{className:"header",style:{backgroundColor:"".concat(b.headerBGC)},children:Y.map(function(y,d){return(0,t.jsx)("div",{className:"header-item",style:{height:"".concat(b.headerHeight,"px"),lineHeight:"".concat(b.headerHeight,"px"),width:"".concat(M[d],"px"),textAlign:m[d],color:"".concat(b.headerColor)},dangerouslySetInnerHTML:{__html:y}},"".concat(y,"-").concat(d))})}),!!b&&(0,t.jsx)("div",{className:"rows",style:{height:"".concat(g-(Y.length?b.headerHeight:0),"px")},children:S&&S.length>0?S.map(function(y,d){return(0,t.jsx)("div",{className:"row-item",style:k()({height:"".concat(R[d],"px"),lineHeight:"".concat(R[d],"px"),backgroundColor:"".concat(ne(y.scroll)),color:b.rowColor},oe(y.scroll)),children:y.ceils.map(function(w,s){return(0,t.jsx)("div",{className:"ceil",style:{width:"".concat(M[s],"px"),textAlign:m[s]},onClick:function(){return B(n,d,s,y,w)},onMouseEnter:function(){return F(!0,d,s,y,w)},onMouseLeave:function(){return F(!1)},children:w},"".concat(w,"-").concat(d,"-").concat(s))})},"".concat(y.toString(),"-").concat(y.scroll))}):"\u6682\u65E0\u6570\u636E"})]})});Me.propTypes={onClick:ve().func,onMouseOver:ve().func,className:ve().string,style:ve().object};var Tn=Me,$n={timeline:"xV6u_oDNuss1oTJhBKRx"},Fn=function(e){return e>9?"".concat(e):"0".concat(e)},Un=function(e){var n=e.starttime,o=e.endtime,u=e.playtime,i=e.onChange,r=(0,j.useRef)(null),c=(0,j.useRef)(null);return(0,j.useEffect)(function(){var l,g,f,D,N,A=r.current,H=60,b=A.parentNode.getBoundingClientRect(),Y,S,M=b.width-2,R=b.height-2;A.width=M,A.height=R;var m=A.getContext("2d"),x=0,T=0,E=0,L=function(v,h){m.fillStyle="#656566",m.font="13px Arial",m.textAlign="center",m.textBaseline="top",m.fillText(v,h,15)},$=function(v,h){if(m.lineWidth=1,m.strokeStyle="#979899",m.beginPath(),m.moveTo(v-.5,0),m.lineTo(v-.5,h%4===1?10:6),m.stroke(),h%4===1){var p=ee()(S).add(v*H,"seconds").format("HH:00");L(p==="00:00"?ee()(S).add(v*H,"seconds").format("YYYY-MM-DD"):p,v)}},O=function(v){var h=M/2;m.beginPath(),m.lineWidth=1,m.strokeStyle="#3370FF",m.moveTo(h,0),m.lineTo(h,42),m.stroke(),m.fillStyle="#3370FF",m.font="13px Arial",m.textAlign="center",m.textBaseline="top",m.fillText(v||u,h,45)},V=function(v){m.beginPath(),m.lineWidth=1,m.strokeStyle="#3370FF",m.moveTo(v,0),m.lineTo(v,42),m.stroke(),m.fillStyle="#3370FF",m.font="13px Arial",m.textAlign="center",m.textBaseline="top",m.fillText(ee()(S).add(v*H,"seconds").format("YYYY-MM-DD HH:mm:ss"),v,45)},B=function(v,h){x=0,T=0,E=0,Y=ee()(h||u).subtract(M*H/2,"seconds"),S=Y.format("YYYY-MM-DD HH:mm:ss");var p=parseInt(Y.format("HH"),10),I=Fn(p%2===0?p+2:p+1);for(m.clearRect(0,0,M,R);x<M;)x+=1,T===0&&ee()(S).add(x*H,"seconds").format("HH:mm")==="".concat(I==="24"?"00":I,":00")?(T+=1,E=x,E>30?new Array(Math.ceil(E/30)).fill(1).map(function(P,U){return $(E-U*30,U===0?T:0),P}):$(x,1),x+=29):T>0&&(x-E)%30===0&&(T+=1,$(x,T),x+=29);O(h),v&&v>0&&V(v)};B(0);var F=function(v,h){var p;switch(h){case"mousemove":B(v.offsetX);break;case"mouseenter":B(0);break;case"mouseleave":B(0);break;case"click":p=ee()(S).add(v.offsetX*H,"seconds").format("YYYY-MM-DD HH:mm:ss"),i&&typeof i=="function"&&i(p);break;default:break}};function ne(s){F(s,"click")}function oe(s){F(s,"mouseenter")}function re(s){F(s,"mouseleave")}function le(s){F(s,"mousemove")}var y=!1,d=null,w=function(v){var h=v.clientX;d=null,y=!0;var p=function(U){if(y){var J=U.clientX-h;d=ee()(u).subtract(J*H,"seconds").format("YYYY-MM-DD HH:mm:ss"),B(0,d)}},I=function P(){y&&d!==null&&i&&typeof i=="function"&&i(d),y=!1,document.body.removeEventListener("mousemove",p),document.body.removeEventListener("mouseup",P)};document.body.addEventListener("mousemove",p),document.body.addEventListener("mouseup",I)};return(l=r.current)===null||l===void 0||l.addEventListener("click",ne),(g=r.current)===null||g===void 0||g.addEventListener("mouseenter",oe),(f=r.current)===null||f===void 0||f.addEventListener("mouseleave",re),(D=r.current)===null||D===void 0||D.addEventListener("mousemove",le),(N=c.current)===null||N===void 0||N.addEventListener("mousedown",w),function(){var s,v,h,p,I;(s=r.current)===null||s===void 0||s.removeEventListener("click",ne),(v=r.current)===null||v===void 0||v.removeEventListener("mouseenter",oe),(h=r.current)===null||h===void 0||h.removeEventListener("mouseleave",re),(p=r.current)===null||p===void 0||p.removeEventListener("mousemove",le),(I=c.current)===null||I===void 0||I.removeEventListener("mousedown",w)}},[n,o,i,u]),(0,t.jsxs)("div",{className:$n.timeline,style:{cursor:"pointer"},children:[(0,t.jsx)("canvas",{ref:r}),(0,t.jsx)("div",{className:"move",ref:c})]})},Bn=Un}}]);
