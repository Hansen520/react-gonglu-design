"use strict";(self.webpackChunkreact_gonglu_design=self.webpackChunkreact_gonglu_design||[]).push([[957],{98957:function(ze,Q,l){l.r(Q),l.d(Q,{Button:function(){return Ie},CountdownButton:function(){return me},Foo:function(){return ae},RankList:function(){return ie},ScrollBoard:function(){return De}});var p=l(67294),g=l(85893),re=function(e){return(0,g.jsx)("h4",{children:e.title})},ae=re;function oe(r){var e=r.data;return(0,g.jsx)("div",{className:"rank-list",children:e.length?(0,g.jsx)("ul",{children:e.filter(function(i,a){return a<10}).map(function(i,a){var v=i.label,x=i.value;return(0,g.jsxs)("li",{children:[(0,g.jsx)("div",{className:"rank",style:{backgroundColor:a+1<4?"#27478d":"#fafafa",color:a+1<4?"#fff":"rgba(0, 0, 0, 0.65)"},children:a+1}),(0,g.jsx)("div",{className:"name",children:(0,g.jsx)("span",{title:v||"--",children:v||"--"})}),(0,g.jsx)("div",{className:"num",children:x})]},v)})}):(0,g.jsx)("div",{className:"empty",children:"\u6682\u65E0\u6570\u636E"})})}var ie=oe,ue=l(97857),f=l.n(ue),se=l(5574),K=l.n(se),ce=l(13769),le=l.n(ce),de=l(44428),fe=["maxSecondNum","txt","loadingTxt","disabledTxt","onClick"],he=60;function ve(r){var e=r.maxSecondNum,i=e===void 0?he:e,a=r.txt,v=a===void 0?"\u83B7\u53D6\u9A8C\u8BC1\u7801":a,x=r.loadingTxt,c=x===void 0?"\u53D1\u9001\u4E2D":x,h=r.disabledTxt,y=h===void 0?function(b){return"".concat(b," \u79D2\u540E\u91CD\u8BD5")}:h,B=r.onClick,M=B===void 0?function(b){b()}:B,P=le()(r,fe),V=(0,p.useState)({timing:!1,count:i}),R=K()(V,2),H=R[0],w=R[1];(0,p.useEffect)(function(){var b=void 0;return H.timing&&(b=window.setInterval(function(){w(function(G){var z=G.count,N=G.timing;return z===1?(window.clearInterval(b),{timing:!1,count:i}):{timing:N,count:z-1}})},1e3)),function(){return window.clearInterval(b)}},[H.timing]);var O=function(){w(f()(f()({},H),{},{timing:!0}))},T;return P.loading?T=c:H.timing?T=y(H.count):T=v,(0,g.jsx)(de.ZP,f()(f()({disabled:H.timing,style:f()({minWidth:100},P.style||{}),onClick:function(){M&&M(O)}},P),{},{children:T}))}var me=ve,ge=l(15009),I=l.n(ge),we=l(19632),D=l.n(we),xe=l(45697),L=l.n(xe),pe=l(94184),Ce=l.n(pe),U=l(72744),ye=l(11140);function be(r,e){var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,a=new i(e);return a.observe(r,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),a}var Ne=function(e){var i=!1,a=!1,v=null;if(typeof e=="function"&&(e=e()),!e||typeof e.next!="function")return function(){return{}};return Promise.resolve().then(function(){i||x(e.next())}),{end:function(){i=!0,Promise.resolve().then(function(){e.return(),e=null})},pause:function(){i||(a=!0)},resume:function(){var h=v;!i&&a&&(a=!1,Promise.resolve(v).then(function(){!i&&!a&&h===v&&x(e.next())}))}};function x(c){return c.done?c.value:(v=c.value,Promise.resolve(c.value).then(function(){!i&&!a&&x(e.next())}))}},je=l(96486);function Re(r){var e=(0,p.useRef)(null),i=(0,p.useState)({width:0,height:0}),a=K()(i,2),v=a[0],x=a[1],c=(0,p.useCallback)(function(){var h=e.current||{clientWidth:0,clientHeight:0},y=h.clientWidth,B=h.clientHeight;x({width:y,height:B}),e.current?(!y||!B)&&console.warn("\u7EC4\u4EF6\u9AD8\u5EA6\u6216\u8005\u5BBD\u5EA6\u4E3A0\uFF0C\u53EF\u80FD\u4F1A\u53D1\u751F\u7EC4\u4EF6\u5F02\u5E38!"):console.warn("\u6CA1\u6709\u83B7\u53D6\u5230DOM!")},[]);return(0,p.useImperativeHandle)(r,function(){return{setWH:c}},[]),(0,p.useEffect)(function(){var h=(0,je.debounce)(c,100);h();var y=be(e.current,h);return window.addEventListener("resize",h),function(){window.removeEventListener("resize",h),y&&(y.disconnect(),y.takeRecords())}},[]),f()(f()({},v),{},{domRef:e,setWH:c})}var He=l(1815),Se={columns:[{title:"",dataIndex:"",ellipsis:!1}],dataSource:[],header:[],data:[],rowNum:5,headerBGC:"#62c9e9",oddRowBGC:"#4fa3c2cc",evenRowBGC:"#5097592c",oddRowBorder:{borderWidth:"0 2px 0 2px",borderStyle:"dashed",borderColor:"#37ecc5"},evenRowBorder:{borderWidth:"0 2px 0 2px",borderStyle:"dashed",borderColor:"#37ecc5"},headerColor:"#000000",rowColor:"#fff",waitTime:2e3,headerHeight:35,columnWidth:[],align:[],index:!1,indexHeader:"#",carousel:"single",hoverPause:!0},Be=function(e,i){return i.ellipsis?(0,g.jsx)(He.Z,{placement:"topLeft",title:e,children:e}):e};function Te(r){var e=r.header,i=r.index,a=r.indexHeader;return e.length?(e=D()(e),i&&e.unshift(a),e):[]}function ke(r){var e=r.data,i=r.index,a=r.headerBGC,v=r.rowNum;i&&(e=e.map(function(c,h){c=D()(c);var y=(0,g.jsx)("span",{className:"index",style:{backgroundColor:a},children:h+1});return c.unshift(y),c})),e=e.map(function(c,h){return{ceils:c,rowIndex:h}});var x=e.length;return x>v&&(e=[].concat(D()(e),D()(e))),e.map(function(c,h){return f()(f()({},c),{},{scroll:h})})}function We(r,e){var i=e.length,a=new Array(i).fill("left"),v=r.align;return(0,U.Z)(a,v)}var q=(0,p.forwardRef)(function(r,e){var i=r.onClick,a=r.config,v=r.className,x=r.style,c=r.onMouseOver,h=Re(e),y=h.width,B=h.height,M=h.domRef,P=(0,p.useState)({mergedConfig:null,header:[],rows:[],widths:[],heights:[],aligns:[]}),V=K()(P,2),R=V[0],H=V[1],w=R.mergedConfig,O=R.header,T=R.rows,b=R.widths,G=R.heights,z=R.aligns,N=(0,p.useRef)(f()(f()({},R),{},{rowsData:[],avgHeight:0,animationIndex:0}));Object.assign(N.current,R);function Me(){if(w){var o=_(w,N.current.rowsData),t=ee(w,O),u={widths:o,heights:t};Object.assign(N.current,u),H(function(n){return f()(f()({},n),u)})}}var Oe=function(t){var u=[];return t.dataSource.forEach(function(n){var m=[];t.columns.forEach(function(s){var d=s.render?s.render(n[s.dataIndex],n):Be(n[s.dataIndex],s);m.push(d)}),u.push(m)}),f()(f()({},t),{},{header:t.columns.map(function(n){return n.title}),data:u})},Ee=function(){var t=Oe((0,U.Z)((0,ye.Z)(Se),a||{})),u=Te(t),n=ke(t),m=_(t,N.current.rowsData),s=ee(t,u),d=We(t,u),C={mergedConfig:t,header:u,rows:n,widths:m,aligns:d,heights:s};Object.assign(N.current,C,{rowsData:n,animationIndex:0}),H(function(k){return f()(f()({},k),C)})};console.log(T,341);var _=function(t,u){var n=t.columnWidth,m=t.header,s=n.reduce(function(j,W){return j+W},0),d=0;u[0]?d=u[0].ceils.length:m.length&&(d=m.length);var C=(y-s)/(d-n.length),k=new Array(d).fill(C);return(0,U.Z)(k,n)};function ee(o,t){var u=o.headerHeight,n=o.rowNum,m=o.data,s=B;t.length&&(s-=u);var d=s/n;return Object.assign(N.current,{avgHeight:d}),new Array(m.length).fill(d)}function $e(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return I()().mark(function t(){var u,n,m,s,d,C,k,j,W,E,F,S,Z,J,Y;return I()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(n=N.current,m=n.avgHeight,s=n.animationIndex,d=n.mergedConfig,C=d.waitTime,k=d.carousel,j=d.rowNum,W=n.rowsData,E=W.length,!o){$.next=5;break}return $.next=5,new Promise(function(A){return setTimeout(A,C)});case 5:return F=k==="single"?1:j,S=W.slice(s),(u=S).push.apply(u,D()(W.slice(0,s))),S=S.slice(0,k==="page"?j*2:j+1),Z=new Array(E).fill(m),H(function(A){return f()(f()({},A),{},{rows:S,heights:Z})}),$.next=13,new Promise(function(A){return setTimeout(A,300)});case 13:s+=F,J=s-E,J>=0&&(s=J),Y=D()(Z),Y.splice.apply(Y,[0,F].concat(D()(new Array(F).fill(0)))),Object.assign(N.current,{animationIndex:s}),H(function(A){return f()(f()({},A),{},{heights:Y})});case 20:case"end":return $.stop()}},t)})()}function te(o,t,u,n,m){var s=n.ceils,d=n.rowIndex;o&&o({row:s,ceil:m,rowIndex:d,columnIndex:u})}function ne(o,t,u,n,m){if(o&&te(c,t,u,n,m),!!w.hoverPause){var s=X.current,d=s.pause,C=s.resume;o&&d&&C?d():function(){C&&C()}()}}var Le=function(t){return w[t%2===0?"evenRowBGC":"oddRowBGC"]},Pe=function(t){return w[t%2===0?"evenRowBorder":"oddRowBorder"]},X=(0,p.useRef)({});(0,p.useEffect)(function(){var o=I()().mark(u);Ee();var t=!0;function u(){var C;return I()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:C=I()().mark(function W(){var E;return I()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.delegateYield($e(t),"t0",1);case 1:return t=!1,E=N.current.mergedConfig.waitTime,S.next=5,new Promise(function(Z){return setTimeout(Z,E-300)});case 5:case"end":return S.stop()}},W)});case 1:return j.delegateYield(C(),"t0",3);case 3:j.next=1;break;case 5:case"end":return j.stop()}},o)}var n=N.current,m=n.mergedConfig.rowNum,s=n.rows,d=s.length;if(!(m>=d))return X.current=Ne(u),X.current.end},[a,M.current]),(0,p.useEffect)(Me,[y,B,M.current]);var Ge=(0,p.useMemo)(function(){return Ce()("dv-scroll-board",v)},[v]);return(0,g.jsxs)("div",{className:Ge,style:x,ref:M,children:[!!O.length&&!!w&&(0,g.jsx)("div",{className:"header",style:{backgroundColor:"".concat(w.headerBGC)},children:O.map(function(o,t){return(0,g.jsx)("div",{className:"header-item",style:{height:"".concat(w.headerHeight,"px"),lineHeight:"".concat(w.headerHeight,"px"),width:"".concat(b[t],"px"),textAlign:z[t],color:"".concat(w.headerColor)},dangerouslySetInnerHTML:{__html:o}},"".concat(o,"-").concat(t))})}),!!w&&(0,g.jsx)("div",{className:"rows",style:{height:"".concat(B-(O.length?w.headerHeight:0),"px")},children:T&&T.length>0?T.map(function(o,t){return(0,g.jsx)("div",{className:"row-item",style:f()({height:"".concat(G[t],"px"),lineHeight:"".concat(G[t],"px"),backgroundColor:"".concat(Le(o.scroll)),color:w.rowColor},Pe(o.scroll)),children:o.ceils.map(function(u,n){return(0,g.jsx)("div",{className:"ceil",style:{width:"".concat(b[n],"px"),textAlign:z[n]},onClick:function(){return te(i,t,n,o,u)},onMouseEnter:function(){return ne(!0,t,n,o,u)},onMouseLeave:function(){return ne(!1)},children:u},"".concat(u,"-").concat(t,"-").concat(n))})},"".concat(o.toString(),"-").concat(o.scroll))}):"\u6682\u65E0\u6570\u636E"})]})});q.propTypes={config:L().object,onClick:L().func,onMouseOver:L().func,className:L().string,style:L().object};var De=q,Ae=function(e){var i=e.type,a=i===void 0?"default":i,v=e.children,x=e.onClick;return(0,g.jsx)("button",{type:"button",className:"dumi-btn ".concat(a?"dumi-btn-"+a:""),onClick:x,children:v})},Ie=(0,p.memo)(Ae)}}]);
